- hosts: all
  become: true
  gather_facts: yes
  
  roles:
    # Systems
    - sys-optimiz
    - sys-user
    - sys-db
    # Environments
    - env-amn
    - env-amp
    - env-ampy
    - env-emn
    - env-emp
    - env-empy
    # Apps
    - app-wordpress

  handlers:
  - name: start-apache
    service:
      name: apache2
      state: started

  - name: reload-apache
    service:
      name: apache2
      state: reloaded

  - name: restart-apache
    service:
      name: apache2
      state: restarted

  - name: start-nginx
    service:
      name: nginx
      state: started

  - name: reload-nginx
    service:
      name: nginx
      state: reloaded

  - name: restart-nginx
    service:
      name: nginx
      state: restarted

  - name: start-monitoring
    service:
      name: cman
      state: started

  - name: enable-monitoring
    service:
      name: cman
      state: enabled

  - name: restart-monitoring
    service:
      name: cman
      state: restarted

  - name: autoremove
    apt:
      autoremove: yes
